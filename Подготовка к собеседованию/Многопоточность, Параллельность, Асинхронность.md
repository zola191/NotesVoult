## Что такое многопоточность
**Многопоточность** — это возможность выполнения нескольких потоков (threads) внутри одного процесса, позволяющая параллельно обрабатывать задачи и эффективно использовать ресурсы процессора.

**Процесс** — это экземпляр выполняемой программы/приложения (word excel), который изолирован от других процессов (чтобы не мог навредить другому процессу)  и имеет собственные ресурсы: память, потоки и т. д.

**Поток** — это наименьшая единица выполнения внутри процесса (единица которой процессор выделяет свое время в котором происходят какие либо действия), которая может выполняться параллельно с другими потоками. Потоки разделяют ресурсы своего родительского процесса (память, файлы), но имеют собственный стек вызовов.

### **Процесс vs Поток (Thread)**

| Характеристика   | Процесс                           | Поток (Thread)                      |
| ---------------- | --------------------------------- | ----------------------------------- |
| **Изоляция**     | Полная (своя память)              | Разделяет память процесса           |
| **Создание**     | Тяжелее (нужна отдельная среда)   | Легче (использует ресурсы процесса) |
| **Переключение** | Медленнее (из-за смены контекста) | Быстрее                             |
| **Надёжность**   | Безопаснее (падение не влияет)    | Ошибка может убить весь процесс     |

в чем разница между асинхронным программированием и многопоточным?
Всегда ли асинхронность выполняется в нескольких потоках? ответ нет см как выполнен eventloop в javascript (однопоточный язык программирования)
как создать поток ? new Thread это класс который связан с потоками операционной системы, через данный класс можно выставить приоритет т.е. если нам нужен поток с нестандартным приоритетом, то используем Thread 
потоки бывают двух видов активные и фоновые
приложение перестает работать когда нет ни одного активного потока
у потока есть свой приоритет от 0 до 31 который складывается из двух значений приоритета процесса и потока
минусы использования Thread
создавать поток дорогостоящая операция
операция не очень длительная, например операция длится 3 милисекунды и создавать поток избыточно т.к. мы можем создавать поток дольше чем сама операция
## Thread Pool
зачем нам создавать поток если можно создать целую пачку потоков за раз и использовать их когда они нужны это и есть пул потоков
когда создается приложение в вашем процессе будет пул потоков которым распоряжается CLR 
Работали ли вы с многопоточностью? ответ нет неприемлем т.к. не работать с многопоточностью сейчас нельзя пример async await подразумеваем работу с многопоточностью т.к. вызов выполнялся на пуле потоков 
Пул потоков закрывает все задачи или можно использовать Thread?
когда требуется создать поток явно
- когда требуется поток с нестандартным приоритетом (тут нужен пример) сборщик мусора работает в отдельном высокоприоритетным потоке 
- когда нужно создать активный поток (нужно определение активного и пассивного потока)
- когда операция будет выполняться долго (можно ли BackgroundService отнести к этому? )

## ValueTask
это не действие это обещание что задача будет выполнена
нужны в одном случае когда не факт что метод будет выполняться асинхронном (нужен пример)
напоминание Task это ссылочный тип 

## async await
```csharp
async Task Get()
{
	Console.WriteLine("");
	await repo.Get();
}
Main()
{
	await Get();
}
```

state машина количество состояний равно количеству await (это верно?)
почему нельзя указывать void вместо Task?
1. не сможем указать await
2. ошибки (что именно тут?)

## Race Condition (гонка данных)
аномалия в многопоточном программировании результат случаен и зависит от того как начнут работать потоки (добавить пример про инкремент и декремент)

для исключения данных случаев нужны примитивы синхронизации

1. lock
2. monitor
3. mutex
4. semaphore
5. semaphoreSlim
6. interlocked
7. volatile


