Кеширование - сохранение данных в быстром хранилище для ускорения доступа к ним тем с самым снизить нагрузку на БД
Кеширование ускоряет обработку запросов
4 вида кеширования в ASP
1. In memory cash
2. Распределенный кэш, Redis
3. Response cash
4. Cash tag helpers в Razor

##  Memory cash

в памяти процесса 
очень быстрое кеширования

способ подключения

```csharp
builder.Services.AddMemoryCache();
```

Пример простого использования

```csharp
public class ProductService
{
    private readonly IMemoryCache _cache;
    public ProductService(IMemoryCache cache)
    {
        _cache = cache;
    }

    public Product GetProduct(int id)
    {
        return _cache.GetOrCreate($"product_{id}", entry =>
        {
            entry.AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(5);
            return LoadProductFromDatabase(id);
        });
    }
}
```

сценарии использования
- небольшие приложения или прототепирование
- нет горизонтального масштабирования
- часто читаются редко меняются
минусы
- в случае рестарта приложения cash теряем
- не поддерживается распределенный cash

### Распределенный кэш Redis
использовать cash разными instance
есть горизонтальное масштабирование

способ подключения
```csharp
builder.Services.AddStackExchangeRedisCache(options =>
{
    options.Configuration = "localhost:6379";
});
```

пример использования

```csharp
public class DistributedProductService
{
    private readonly IDistributedCache _cache;
    public DistributedProductService(IDistributedCache cache)
    {
        _cache = cache;
    }

    public async Task<string> GetProductNameAsync(int id)
    {
        var name = await _cache.GetStringAsync($"product_{id}");
        if (name != null)
            return name;

        var productName = $"Product {id}";
        await _cache.SetStringAsync($"product_{id}", productName,
            new DistributedCacheEntryOptions
            {
                AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(10)
            });

        return productName;
    }
}
```

сценарии использования
облачная арх
сервисная арх
отказоустойчивость
рестарт не теряет кеш-а
доступ к кешу разным instance приложения

? LRU кеши ?
? LFU кеши ? не очень часто ходят

### Response cash
кеширование на уровне контроллера
в http есть теги 
важно использование индемпотентности

способ подключения
```csharp
builder.Services.AddResponseCaching();
app.UseResponseCaching();
```

Пример использования
```csharp
[HttpGet]
[ResponseCache(Duration = 60)]
public IActionResult GetWeather()
{
    return Ok(new { Temperature = "22C", Condition = "Sunny" });
}
```

сценарии использования
статичные данные или редко изменяемые данные