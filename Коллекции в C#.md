# Сравнение коллекций в C#

| Коллекция/Интерфейс      | Чтение | Запись | Доступ по индексу | Ленивое выполнение | Потокобезопасность | Основное назначение                                                                 |
|--------------------------|--------|--------|-------------------|--------------------|--------------------|-------------------------------------------------------------------------------------|
| **IEnumerable<T>**       | ✅     | ❌     | ❌                | ✅ (если LINQ)    | ❌                 | Перебор данных, работа с LINQ-запросами                                             |
| **IQueryable<T>**        | ✅     | ❌     | ❌                | ✅                 | ❌                 | Запросы к базам данных через LINQ                                                  |
| **IList<T>**             | ✅     | ✅     | ✅                | ❌                 | ❌                 | Динамические коллекции с доступом по индексу                                       |
| **ICollection<T>**       | ✅     | ✅     | ❌                | ❌                 | ❌                 | Базовые операции добавления, удаления и очистки                                    |
| **IReadOnlyCollection<T>** | ✅   | ❌     | ❌                | ❌                 | ❌                 | Только чтение коллекции                                                            |
| **IReadOnlyList<T>**     | ✅     | ❌     | ✅                | ❌                 | ❌                 | Только чтение с доступом по индексу                                                |
| **IDictionary<TKey, TValue>** | ✅ | ✅   | ❌ (по ключу ✅)  | ❌                 | ❌                 | Хранение пар "ключ-значение"                                                       |
| **Array**                | ✅     | ❌     | ✅                | ❌                 | ❌                 | Фиксированные коллекции                                                            |
| **ConcurrentDictionary<TKey, TValue>** | ✅ | ✅ | ❌ (по ключу ✅) | ❌                 | ✅                 | Потокобезопасный словарь                                                           |
| **ConcurrentQueue<T>**   | ✅     | ✅     | ❌                | ❌                 | ✅                 | Потокобезопасная очередь (FIFO)                                                    |
| **ConcurrentStack<T>**   | ✅     | ✅     | ❌                | ❌                 | ✅                 | Потокобезопасный стек (LIFO)                                                       |
| **BlockingCollection<T>**| ✅     | ✅     | ❌                | ❌                 | ✅                 | Потокобезопасная коллекция с блокировкой потоков                                   |
| **LinkedList<T>**        | ✅     | ✅     | ❌                | ❌                 | ❌                 | Частые вставки и удаления элементов в середине коллекции                           |
| **Queue<T>**             | ✅     | ✅     | ❌                | ❌                 | ❌                 | FIFO-очередь                                                                       |
| **Stack<T>**             | ✅     | ✅     | ❌                | ❌                 | ❌                 | LIFO-стек                                                                          |
| **HashSet<T>**           | ✅     | ✅     | ❌                | ❌                 | ❌                 | Хранение уникальных элементов                                                      |
| **SortedSet<T>**         | ✅     | ✅     | ❌                | ❌                 | ❌                 | Упорядоченное хранение уникальных элементов                                         |
| **SortedList<TKey, TValue>** | ✅ | ✅   | ❌ (по ключу ✅)  | ❌                 | ❌                 | Упорядоченный словарь, оптимизированный для частых операций вставки/удаления       |
| **SortedDictionary<TKey, TValue>** | ✅ | ✅ | ❌ (по ключу ✅) | ❌                 | ❌                 | Упорядоченный словарь на основе двоичного дерева                                   |

---

## Примечания

1. **Ленивое выполнение**:
   - Поддерживается только `IEnumerable<T>` и `IQueryable<T>`.
   - Для других коллекций данные загружаются сразу.

2. **Потокобезопасность**:
   - Коллекции из пространства имён `System.Collections.Concurrent` являются потокобезопасными.
   - Обычные коллекции (например, `List<T>`, `Dictionary<TKey, TValue>`) не потокобезопасны.

3. **Доступ по индексу**:
   - Только коллекции, реализующие `IList<T>` или массивы, поддерживают доступ по индексу.
   - Словари (`IDictionary<TKey, TValue>`) поддерживают доступ по ключу.

4. **Уникальность элементов**:
   - `HashSet<T>` и `SortedSet<T>` гарантируют уникальность элементов.
   - `Dictionary<TKey, TValue>` гарантирует уникальность ключей.

5. **Производительность**:
   - Для больших объёмов данных используйте `HashSet<T>` или `Dictionary<TKey, TValue>`, так как они основаны на хэш-таблицах.
   - Для упорядоченных данных используйте `SortedSet<T>` или `SortedDictionary<TKey, TValue>`.

---

## Когда использовать каждую коллекцию?

- **Простой перебор данных**: `IEnumerable<T>`.
- **Запросы к базам данных**: `IQueryable<T>`.
- **Динамические коллекции с доступом по индексу**: `IList<T>`, `List<T>`.
- **Только чтение**: `IReadOnlyCollection<T>`, `IReadOnlyList<T>`.
- **Хранение пар "ключ-значение"**: `IDictionary<TKey, TValue>`, `Dictionary<TKey, TValue>`.
- **Фиксированные коллекции**: `Array`.
- **Многопоточность**: `ConcurrentDictionary<TKey, TValue>`, `ConcurrentQueue<T>`, `ConcurrentStack<T>`.
- **Частые вставки/удаления  в середине коллекции **: `LinkedList<T>`.
- **Очереди задач**: `Queue<T>`, `ConcurrentQueue<T>`.
- **Стеки**: `Stack<T>`, `ConcurrentStack<T>`.
- **Уникальные элементы**: `HashSet<T>`, `SortedSet<T>`.

---